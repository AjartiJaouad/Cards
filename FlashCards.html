<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashCards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/flashcss.css">
</head>

<body class="flex flex-col min-h-screen bg-[#F8F9FA] text-[#1C1C1C]">

    <!-- Navbar -->
    <nav class="bg-[#2E7D32] h-20 flex items-center px-6 shadow-md">
        <img src="/img/logo.svg" alt="logo" class="h-12">
        <ul class="flex ml-auto gap-8 text-2xl font-semibold text-white">
            <li><a href="/index.html" class="hover:text-[#F9E79F] transition">Home</a></li>
            <li><a href="/FlashCards.html" class="hover:text-[#F9E79F] transition">FlashCards</a></li>
            <li><a href="quize.html" class="hover:text-[#F9E79F] transition">Quiz</a></li>
        </ul>
    </nav>

    <!-- Section principale -->
    <section class="flex flex-col md:flex-row grow items-start md:items-center p-10 gap-12 bg-[#F9E79F]">

        <!-- Formulaire -->
        <div class="flex flex-col gap-6 w-full md:w-1/2 bg-white shadow-lg rounded-2xl p-6 border border-[#DDE6E8]">
            <h1 class="text-3xl font-bold text-[#2E7D32]">Creer une Collection</h1>

            <input id="inputNouvelleCollection"
                class="bg-[#F9E79F] rounded-xl p-2 border border-[#DDE6E8] focus:outline-none focus:ring-2 focus:ring-[#2E7D32]"
                type="text" placeholder="Nom de la Collection...">

            <button onclick="creerCollection()"
                class="bg-[#2E7D32] rounded-3xl w-[140px] p-2 text-white font-semibold hover:bg-[#256928] transition">+</button>

            <h1 class="text-2xl font-semibold mt-6 text-[#2E7D32]">Ajouter une Carte</h1>

            <select id="selectCollections"
                class="bg-[#F9E79F] rounded-xl p-2 border border-[#DDE6E8] focus:outline-none focus:ring-2 focus:ring-[#2E7D32]">
                <option value="">Selectionner une Collection</option>
            </select>

            <input id="inputQuestion"
                class="bg-[#F9E79F] rounded-xl p-2 border border-[#DDE6E8] focus:outline-none focus:ring-2 focus:ring-[#2E7D32]"
                type="text" placeholder="Entrez la question...">

            <input id="inputReponse"
                class="bg-[#F9E79F] rounded-xl p-2 border border-[#DDE6E8] focus:outline-none focus:ring-2 focus:ring-[#2E7D32]"
                type="text" placeholder="Entrez la reponse...">

            <button onclick="ajouterCarte()"
                class="bg-[#2E7D32] rounded-3xl w-[140px] p-2 text-white font-semibold hover:bg-[#256928] transition">Ajouter</button>
        </div>

        <!-- Affichage des cartes -->
        <div class="flex flex-col w-full md:w-1/2 items-center gap-6">
            <p id="compteurCarte"
                class="text-4xl text-[#2E7D32] bg-[#F9E79F] px-8 py-4 rounded-3xl shadow-md">
            </p>

            <h1 id="titreCollection"
                class="text-2xl font-semibold text-[#1C1C1C] bg-[#DDE6E8] px-6 py-3 rounded-3xl">
                Pas de collection
            </h1>

            <div class="w-full h-64 perspective">
                <div class="carte" id="carte">
                    <div
                        class="face-avant text-[#1C1C1C] bg-white shadow-md p-6 rounded-2xl flex items-center justify-center border border-[#DDE6E8]">
                        <p id="texteQuestion" class="text-center text-xl font-medium"></p>
                    </div>
                    <div
                        class="face-arriere text-[#1C1C1C] bg-white shadow-md p-6 rounded-2xl flex items-center justify-center border border-[#DDE6E8]">
                        <p id="texteReponse" class="text-center text-xl font-medium"></p>
                    </div>
                </div>
            </div>

            <div class="flex justify-between w-full mt-4">
                <button onclick="cartePrecedente()"
                    class="bg-[#2E7D32] text-white rounded-3xl w-[140px] p-2 font-semibold hover:bg-[#256928] transition">Precedente</button>

                <button onclick="carteSuivante()"
                    class="bg-[#2E7D32] text-white rounded-3xl w-[140px] p-2 font-semibold hover:bg-[#256928] transition">Suivante</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-[#2E7D32] h-[10vh] flex items-center justify-around text-[#F9E79F] font-medium">
        <li>jaouad@gmail.com</li>
        <li>&copy; FlashCards</li>
        <li>Adresse : Youcode Nador</li>
    </footer>



    <script>
        // Collections et cartes
        let collections = JSON.parse(localStorage.getItem('collections_de_cartes')) || [];
        let indexCollectionActuelle = 0;
        let indexCarteActuelle = 0;

        const carteElement = document.getElementById("carte");

        // Met a jour le select des collections
        function mettreAJourSelect() {
            const select = document.getElementById("selectCollections");
            select.innerHTML = '<option value="">Selectionner une Collection</option>';

            collections.forEach(c => {
                const option = document.createElement("option");
                option.textContent = c.titre;
                option.value = c.id;
                select.appendChild(option);
            });

            select.addEventListener("change", function () {
                const idSelectionne = this.value;
                if (!idSelectionne) return;
                indexCollectionActuelle = collections.findIndex(c => c.id === idSelectionne);
                indexCarteActuelle = 0;
                afficherCarteActuelle();
            });
        }

        // Creer une nouvelle collection
        function creerCollection() {
            const input = document.getElementById("inputNouvelleCollection");
            if (!input.value.trim()) {
                alert("Le nom de la collection ne peut pas etre vide.");
                return;
            }

            const nouvelleCollection = {
                id: input.value.toLowerCase().replace(/\s/g, '-'),
                titre: input.value,
                cartes: []
            };
            collections.push(nouvelleCollection);
            localStorage.setItem('collections_de_cartes', JSON.stringify(collections));
            mettreAJourSelect();

            document.getElementById("selectCollections").value = nouvelleCollection.id;
            indexCollectionActuelle = collections.length - 1;
            indexCarteActuelle = 0;
            afficherCarteActuelle();
            input.value = "";
        }

        // Ajouter une carte a une collection
        function ajouterCarte() {
            const select = document.getElementById("selectCollections");
            const idCollection = select.value;
            if (!idCollection) {
                alert("Veuillez selectionner une collection.");
                return;
            }

            const question = document.getElementById("inputQuestion").value.trim();
            const reponse = document.getElementById("inputReponse").value.trim();
            if (!question || !reponse) {
                alert("Veuillez entrer une question et une reponse.");
                return;
            }

            const collection = collections.find(c => c.id === idCollection);
            collection.cartes.push({ id: Date.now(), question, reponse });
            localStorage.setItem('collections_de_cartes', JSON.stringify(collections));

            document.getElementById("inputQuestion").value = "";
            document.getElementById("inputReponse").value = "";

            indexCollectionActuelle = collections.findIndex(c => c.id === idCollection);
            indexCarteActuelle = collection.cartes.length - 1;
            afficherCarteActuelle();
        }

        // Affiche la carte actuelle
        function afficherCarteActuelle() {
            if (collections.length === 0) {
                document.getElementById("titreCollection").textContent = "Pas de collection";
                document.getElementById("texteQuestion").textContent = "";
                document.getElementById("texteReponse").textContent = "";
                document.getElementById("compteurCarte").textContent = "";
                return;
            }

            const collection = collections[indexCollectionActuelle];
            const carte = collection.cartes[indexCarteActuelle] || { question: "Pas encore de carte", reponse: "" };

            document.getElementById("titreCollection").textContent = collection.titre;
            document.getElementById("texteQuestion").textContent = carte.question;
            document.getElementById("texteReponse").textContent = carte.reponse;

            // Affichage du compteur
            document.getElementById("compteurCarte").textContent =
                collection.cartes.length > 0
                    ? `Carte ${indexCarteActuelle + 1} / ${collection.cartes.length}`
                    : "Aucune carte";

            carteElement.classList.remove("rotation-y-180");
        }


        // Carte suivante
        function carteSuivante() {
            const collection = collections[indexCollectionActuelle];
            if (!collection || collection.cartes.length === 0) return;
            indexCarteActuelle = (indexCarteActuelle + 1) % collection.cartes.length;
            afficherCarteActuelle();
        }

        // Carte precedente
        function cartePrecedente() {
            const collection = collections[indexCollectionActuelle];
            if (!collection || collection.cartes.length === 0) return;
            indexCarteActuelle = (indexCarteActuelle - 1 + collection.cartes.length) % collection.cartes.length;
            afficherCarteActuelle();
        }

        // Flip de la carte au clic
        carteElement.addEventListener("click", () => {
            const collection = collections[indexCollectionActuelle];
            if (!collection || collection.cartes.length === 0) return;
            carteElement.classList.toggle("rotation-y-180");
        });

        mettreAJourSelect();
        afficherCarteActuelle();
    </script>
</body>

</html>